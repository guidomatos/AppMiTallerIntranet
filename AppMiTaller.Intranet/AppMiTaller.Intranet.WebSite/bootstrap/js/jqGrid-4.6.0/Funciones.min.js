function fc_UpdatePanelHeaderBotones(){try{$(".panel-heading[data-spy=affix]").width($(".panel-default").width()-10),$("#btnVerBotones").hide(),$("#divBotones").removeClass("dropdown-menu dropdown-menu-right list-group"),$("#divBotones button").removeClass("list-group-item");var e=$("#divTituloPagina").width()+50,t=$("#divBotones").width(),i=$(".panel-default").width(),o=$(".panel-heading.clearfix[data-spy=affix]").height();(t>=i-e&&!fc_ExistDisplayControl("btnVerBotones")||o>50)&&($("#btnVerBotones").show(),$("#divBotones").addClass("dropdown-menu dropdown-menu-right list-group"),$("#divBotones button").addClass("list-group-item"))}catch(e){fc_AlertError("Error: "+e)}}function fc_ExistDisplayControl(e){return e.indexOf("#")>=0&&(e=e.replace("#","")),!(null==document.getElementById(e)||!$("#"+e).is(":visible"))}function fc_ValidarRuc(e){var t="0",i="",o="";if("99999999999"!=(i=null!=document.getElementById(e)?new String(document.getElementById(e).value):e))if(11==i.length){i=i.split("");var r=new String("5,4,3,2,7,6,5,4,3,2,"),n=new Array(10);n=r.split(",");for(var a=parseFloat(i[10]),l=0;l<10;l++)t=parseFloat(t)+parseFloat(n[l])*parseFloat(i[l]);var s=11-t%11;11==s?s=1:10==s&&(s=0),s!=a?(o=mstrRUCInvalido,!1):!0}else!1,o=mstrLongitudRUC;else!0;return o}function fc_ValidarEmail(e){return expr=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,!!expr.test(e)}function fc_SoloLetras(){var e=window.event?event.keyCode:event.which;return 32==e||e>=65&&e<=90||e>=97&&e<=122||209==e||241==e||(event.keyCode=0,!1)}function fc_SoloNumeros(e){var t;return window.event?t=e.keyCode:e.which&&(t=e.which),13==t||(!(t<48||t>57)||(e.keyCode=0,!1))}function fc_RefreshJQGrid_Responsive(e){e.indexOf("#")<0&&(e="#"+e);var t=$(e),i=$("#gbox_"+e.replace("#","")).parent().width();t.jqGrid("setGridWidth",i)}function fc_ValidarFecha(e){var t=e,i="",o="",r="",n=0,a=t.substr(6,4)+""+t.substr(3,2)+t.substr(0,2);if(""==a.trim())return!1;for(var l=0;l<a.length;l++)if(-1=="1234567890".indexOf(a.charAt(l)))return!1;if(i=t.substr(6,4).trim(),o=t.substr(3,2).trim(),r=t.substr(0,2).trim(),1==o||3==o||5==o||7==o||8==o||10==o||12==o)(isNaN(r)||parseInt(r,10)<1||parseInt(r,10)>31)&&(n=1);else if(4==o||6==o||9==o||11==o)(isNaN(r)||parseInt(r,10)<1||parseInt(r,10)>30)&&(n=1);else{var s=i%4!=0||i%100==0&&i%400!=0?28:29;(isNaN(r)||parseInt(r,10)<1||parseInt(r,10)>s)&&(n=1)}return 1!=n&&(!(parseFloat(o)>12)&&!(parseFloat(i)<1900||parseFloat(i)>2100))}function fc_ValidarRangofechas(e,t){return!(e.substr(6,4)+""+e.substr(3,2)+e.substr(0,2)>t.substr(6,4)+""+t.substr(3,2)+t.substr(0,2))}function fc_ClearGridView(e,t){null!=document.getElementById(e)&&(1==t?$("#"+e).remove():$("#"+e+" tr:not(:first-child)").remove())}function fc_FormatFechaBS(e,t){e.indexOf("#")<0&&(e="#"+e);var i="dpk"+e.replace("#","").replace("txt","");0==fc_ExistDisplayControl(i)&&($(e).wrap("<div class='input-group date' id="+i+" style='max-width:140px;'></div>"),$(e).after("<span class='input-group-addon add-on' title='Ver Calendario'><i class='fa fa-calendar'></i></span>")),$("#"+i).bootstrapDatePicker({format:"dd/mm/yyyy",language:"es",todayHighlight:!0,todayBtn:!0,autoclose:!0,startDate:null,endDate:null,showOnFocus:!1,weekStart:0})}function fc_FormatFechaRangoBS(e,t){e.indexOf("#")<0&&(e="#"+e),$(e).addClass("input-group input-daterange"),$(e).bootstrapDatePicker({format:"dd/mm/yyyy",language:"es",todayHighlight:!0,todayBtn:!0,autoclose:!0,weekStart:0})}function fc_FormatFecha(e,t,i,o){e.indexOf("#")<0&&(e="#"+e),$.datepicker.regional.es={closeText:"Cerrar",prevText:"Previo",nextText:"Próximo",currentText:"Hoy",monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthNamesShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],monthStatus:"Ver otro mes",yearStatus:"Ver otro año",dayNames:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],dayNamesShort:["Dom","Lun","Mar","Mie","Jue","Vie","Sáb"],dayNamesMin:["Do","Lu","Ma","Mi","Ju","Vi","Sa"],dateFormat:"dd/mm/yy",firstDay:0,initStatus:"Selecciona la fecha",isRTL:!1},$.datepicker.setDefaults($.datepicker.regional.es);var r=e;$(r).width(70),$(r).attr("maxlength","10"),0==t.fl_enabled_textbox&&$(r).prop("disabled",!0),$(r).datepicker({showButtonPanel:!0,showOn:"button",buttonImage:"../Images/iconos/calendario.gif",buttonImageOnly:!0,buttonText:"Click para mostrar el Calendario",changeMonth:t.fl_changeMonth,changeYear:t.fl_changeYear,minDate:t.minDate,maxDate:t.maxDate,onClose:function(e){""!=i&&null!=i&&void 0!=i&&$("#"+o).datepicker("option","MIN"==i?"minDate":"maxDate",e)},beforeShow:function(e){setTimeout(function(){var e=$("select.ui-datepicker-year option:first").text();$("select.ui-datepicker-year option:first").text(e+" ▲"),e=$("select.ui-datepicker-year option:last").text(),$("select.ui-datepicker-year option:last").text(e+" ▼")},1)},onChangeMonthYear:function(){setTimeout(function(){var e=$("select.ui-datepicker-year option:first").text();$("select.ui-datepicker-year option:first").text(e+" ▲"),e=$("select.ui-datepicker-year option:last").text(),$("select.ui-datepicker-year option:last").text(e+" ▼")},1)}})}function fc_FormatNumeros(e){e.indexOf("#")<0&&(e="#"+e),$(e).keypress(function(e){return fc_SoloNumeros(e)})}function fc_FormatImporte(e){var t=e.replace("#",""),i=document.getElementById(t);e.indexOf("#")<0&&(e="#"+e),$(e).keypress(function(e){return fc_KeyPressTxtImporte(e,i,mascara_importe)}),$(e).bind("paste",function(){return!1}),$(e).focus(function(e){return fc_OnFocusTxtImporte(e,i,mascara_importe)}),$(e).blur(function(e){return fc_OnBlurTxtImporte(e,i,mascara_importe)})}function fc_KeyPressTxtImporte(e,t,i){var o,r=(i=fc_Replace(i,chr_miles,"")).split(chr_decimales);if(o="."==chr_decimales?46:44,null==e&&(e=window.event),null!=e){var n=0;if(35==(n=e.which?e.which:e.keyCode)||36==n||37==n||38==n||39==n||40==n||n==o||45==n||9==n||8==n)return!0;if(t.value.length>=i.length)return!1;if(n!=o&&(48>n||n>57))return!1;if(n==o&&(r.length>1&&t.value.indexOf(chr_decimales)>-1||r.length<=1))return!1}return!0}function fc_OnFocusTxtImporte(e,t,i){return t.value=fc_Replace(t.value,chr_miles,""),!0}function fc_OnBlurTxtImporte(e,t,i){var o;o="."==chr_decimales?/^[\- \d ,.]+$/i:/^[\- \d .,]+$/i;var r=/^\d+$/i;if(t.value=fc_Replace(t.value,chr_miles,""),""!=fc_Trim(t.value)){var n=i.split(chr_decimales);if(n.length>1){if(!fc_Trim(t.value).match(o))return fc_Alert("El valor ingresado"+mstrFormatoIncorrecto+"El formato correcto es: "+i),t.value="",t.focus(),!1}else if(!fc_Trim(t.value).match(r))return fc_Alert("El valor ingresado"+mstrFormatoIncorrecto+"El formato correcto es: "+i),t.value="",t.focus(),!1;var a="";n.length>1?(isNaN(t.value.replace(",","."))&&(t.value=0),t.value=roundNumber(t.value,n[1].length)):isNaN(t.value.replace(",","."))&&(t.value=0),t.value=t.value,arrTextBox=t.value.split(chr_decimales);for(var l=arrTextBox[0].split(""),s=l.length-1;s>=0;s--)a+=l[s],l.length-s!=0&&0!=s&&(l.length-s)%3==0&&(a+=chr_miles);l=a.split(""),a="";for(s=l.length-1;s>=0;s--)a+=l[s];arrTextBox.length>1&&(a=a+chr_decimales+arrTextBox[1]),t.value=a}}function roundNumber(e,t){var i;if(1>(t=Number(t)))i=Math.round(e).toString();else{var o=e.toString();-1==o.lastIndexOf(chr_decimales)&&(o+=chr_decimales);var r=o.lastIndexOf(chr_decimales)+t,n=Number(o.substring(r,r+1));if(Number(o.substring(r+1,r+2))>=5){if(9==n&&r>0)for(;r>0&&(9==n||isNaN(n));)n!=chr_decimales?(r-=1,n=Number(o.substring(r,r+1))):r-=1;n+=1}i=o.substring(0,r)+n.toString()}-1==i.lastIndexOf(chr_decimales)&&(i+=chr_decimales);for(var a=i.substring(i.lastIndexOf(chr_decimales)+1).length,l=0;t-a>l;l++)i+="0";return i}function fc_GetJQGrid_Local(e,t,i,o,r,n,a,l,s,d){try{var c=e.replace("#","");null!=document.getElementById("gbox_"+c)&&$(e).jqGrid("GridUnload"),e.indexOf("#")<0&&(e="#"+e),t.indexOf("#")<0&&(t="#"+t),0==r.fl_paginar&&(r.pageSize=n.length);var u=n,f=$(e);numberTemplate={formatter:"number",align:"right",sorttype:"number"},f.jqGrid({datatype:"local",data:u,colNames:i,colModel:o,pager:t,rownumbers:!1,loadtext:"Cargando datos...",loadonce:!0,viewrecords:!0,recordtext:"{0} - {1} de {2} registros",emptyrecords:"No existen resultados",pgtext:"Pág: {0} de {1}",rowNum:r.pageSize,height:r.height,scroll:r.fl_paginar_scroll,pgbuttons:r.fl_paginar,pginput:r.fl_paginar,multiboxonly:!0,multiselect:r.multiselect,multiselectWidth:r.multiselectWidth,sortname:0,sortorder:"asc",autowidth:!0,cellsubmit:r.cellsubmit,shrinkToFit:r.shrinkToFit,forceFit:!0,gridview:!0,altRows:r.altRows,hoverrows:!1,cellEdit:r.cellEdit,gridComplete:function(){""!=s&&void 0!=s&&s()},onSelectRow:void 0===r.onSelectRow?function(e){""!=a&&void 0!=a&&a(e)}:r.onSelectRow,beforeSelectRow:function(e,t){if("undefined"==fc_Trim(String(d)))return!0;""!=d&&void 0!=d&&d(e,t)},ondblClickRow:void 0===r.ondblClickRow?function(e){""!=l&&void 0!=l&&l(e)}:r.ondblClickRow,subGrid:r.subGrid,subGridModel:r.subGridModel,subGridRowExpanded:r.subGridRowExpanded,subGridOptions:r.subGridOptions,onSortCol:function(e,t,i){},onPaging:function(e){}})}catch(e){fc_AlertError("CATCH: "+e)}}function fc_GetJQGrid_Ajax(e,t,i,o,r,n,a,l,s,d){var c=i.replace("#","");null!=document.getElementById("gbox_"+c)&&$(i).jqGrid("GridUnload"),i.indexOf("#")<0&&(i="#"+i),o.indexOf("#")<0&&(o="#"+o),0==a.fl_paginar&&(a.pageSize=1e4),$(i).jqGrid({datatype:function(){$.ajax({type:"POST",data:"{'strFiltros':"+JSON.stringify(e)+",'pPageSize':'"+$(i).getGridParam("rowNum")+"','pCurrentPage':'"+$(i).getGridParam("page")+"','pSortColumn':'"+$(i).getGridParam("sortname")+"','pSortOrder':'"+$(i).getGridParam("sortorder")+"'}",dataType:"json",url:t,contentType:"application/json; charset=utf-8",async:!0,beforeSend:function(){fc_show_progress(!0)},complete:function(){fc_show_progress(!1)},success:function(e,t){"success"==t?$(i)[0].addJSONData(JSON.parse(e.d)):fc_AlertError(JSON.parse(e.responseText).Message)},error:function(e,t,i){fc_errorAjax(e,t,i)}})},jsonReader:{root:"Items",page:"CurrentPage",total:"PageCount",records:"RecordCount",repeatitems:!0,cell:"Row",id:"ID"},colNames:r,colModel:n,pager:o,rownumbers:!1,loadtext:"Cargando datos...",viewrecords:!0,recordtext:"{0} - {1} de {2} registros",emptyrecords:"No existen resultados",pgtext:"Pág: {0} de {1}",rowNum:a.pageSize,height:a.height,scroll:a.fl_paginar_scroll,pgbuttons:a.fl_paginar,pginput:a.fl_paginar,multiboxonly:!0,multiselect:a.multiselect,multiselectWidth:a.multiselectWidth,sortname:0,sortorder:"asc",autowidth:!0,shrinkToFit:!1,forceFit:!0,gridview:!0,altRows:a.altRows,hoverrows:!1,gridComplete:function(){""!=d&&void 0!=d&&d()},onSelectRow:function(e){""!=l&&void 0!=l&&l(e)},ondblClickRow:function(e){""!=s&&void 0!=s&&s(e)}}).navGrid(o,{edit:!1,add:!1,search:!1,del:!1,refresh:!1})}function fc_Modal(e,t,i){e.indexOf("#")<0&&(e="#"+e),$(function(){$(e).dialog({autoOpen:!1,modal:t,width:"auto",height:"auto",close:function(){i()},open:function(){}})})}function fc_Alert(e){$("body").append("<div id='dialog-message'></div>"),e="<div style='margin-top: 10px;'><img src='../bootstrap/img/exclamation.png' style='float: left;margin-right:5px;' /><p style='text-align:justify;'>"+(e=e.replace(/\n/g,"<br>"))+"</p></div>",$("#dialog-message").html(e),$("#dialog-message").dialog({resizable:!1,modal:!0,title:"Sistema de Reserva de Citas",closeOnEscape:!1,buttons:{Aceptar:function(){$(this).dialog("close").remove()}},open:function(e,t){$(this).parent().children().children(".ui-dialog-titlebar-close").hide(),$(".ui-dialog :button").blur()}})}function fc_AlertError(e){$("body").append("<div id='dialog-message'></div>"),e="<div style='margin-top: 10px;'><img src='../bootstrap/img/error.png' style='float: left;margin-right:5px;' /><p style='text-align:justify;'>"+(e=e.replace(/\n/g,"<br>"))+"</p></div>",$("#dialog-message").html(e),$("#dialog-message").dialog({resizable:!1,modal:!0,title:"Sistema de Reserva de Citas",closeOnEscape:!1,buttons:{Aceptar:function(){$(this).dialog("close").remove()}},open:function(e,t){$(this).parent().children().children(".ui-dialog-titlebar-close").hide(),$(".ui-dialog :button").blur()}})}function fc_AlertSuccess(e){$("body").append("<div id='dialog-message'></div>"),e="<div style='margin-top: 10px;'><img src='../bootstrap/img/success.png' style='float: left;margin-right:5px;' /><p style='text-align:justify;'>"+(e=e.replace(/\n/g,"<br>"))+"</p></div>",$("#dialog-message").html(e),$("#dialog-message").dialog({resizable:!1,modal:!0,title:"Sistema de Reserva de Citas",closeOnEscape:!1,buttons:{Aceptar:function(){$(this).dialog("close").remove()}},open:function(e,t){$(this).parent().children().children(".ui-dialog-titlebar-close").hide(),$(".ui-dialog :button").blur()}})}function fc_Confirm(e,t){$("body").append("<div id='dialog-confirm'></div>"),e="<div style='margin-top: 10px;'><img src='../bootstrap/img/question.png' style='float: left;margin-right:5px;' /><p style='text-align:justify;'>"+(e=e.replace(/\n/g,"<br>"))+"</p></div>",$("#dialog-confirm").html(e),$("#dialog-confirm").dialog({resizable:!1,modal:!0,title:"Sistema de Reserva de Citas",closeOnEscape:!1,buttons:{Aceptar:function(){$(this).dialog("close").remove(),t(!0)},Cancelar:function(){$(this).dialog("close").remove(),t(!1)}},open:function(e,t){$(this).parent().children().children(".ui-dialog-titlebar-close").hide(),$(".ui-dialog :button").blur()}})}function fc_Hide_Check_All(e){var t=$(e);$("#cb_"+t[0].id).hide()}function fc_CrearTreeView(e,t,i,o,r){$("#"+e).jstree("destroy"),$(function(){$("#"+e).jstree({plugins:["",t],core:{multiple:i,data:o}}).on("changed.jstree",function(e,t){var i,o,n=[];for(i=0,o=t.selected.length;o>i;i++)n.push(t.instance.get_node(t.selected[i]).id);r(n.join(", "))}).jstree()})}function fc_FillCombo(e,t,i){e.indexOf("#")<0&&(e="#"+e),$(e).html(""),0==t.length?$(e).append("<option value=''>"+i+"</option>"):""!=i&&$(e).append("<option value=''>"+i+"</option>"),$.each(t,function(t,i){$(e).append("<option value='"+i.value+"'>"+i.nombre+"</option>")})}function fc_FillComboSelectpicker(e,t,i){$(e).html(""),e.indexOf("#")<0&&(e="#"+e),$(e).html(""),0==t.length?$(e).append("<option value=''>"+i+"</option>"):""!=i&&$(e).append("<option value=''>"+i+"</option>"),$.each(t,function(t,i){$(e).append("<option value='"+i.value+"'>"+i.nombre+"</option>")}),$(e).selectpicker("refresh")}function fc_getJsonAjax(e,t,i,o){"undefined"==o&&(o=!0),fc_show_progress(!0),$.ajax({type:"POST",data:e,dataType:"json",url:t,contentType:"application/json; charset=utf-8",async:o,beforeSend:function(){},complete:function(){fc_show_progress(!1)},success:function(e,t){"success"==t?i(JSON.parse(e.d)):fc_AlertError("ERROR SUCCESS: "+JSON.parse(jsondata.responseText).Message)},error:function(e,t,i){fc_errorAjax(e,t,i)}})}function fc_Msj_Notify(e,t){var i;switch(t){case"1":i="../Bootstrap/img/plugins/gritter/success.png";break;case"2":i="../Bootstrap/img/plugins/gritter/warning.png";break;case"3":i="../Bootstrap/img/plugins/gritter/information.png";break;default:i="../Bootstrap/img/plugins/gritter/error.png"}$(".gritter-item-wrapper").remove(),$.gritter.add({title:"Sistema de Reserva de Citas",text:e,image:i,sticky:!1,time:""})}function fc_CalculoDiaNombreSemana(e){if(3!=(e=e.split("/")).length)return null;var t=[0,3,3,6,1,4,6,2,5,0,3,5],i=[0,3,4,0,2,5,0,3,6,1,4,6],o=["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],r=e[0],n=e[1]-1,a=e[2];return n=a%4!=0||a%100==0&&a%400!=0?t[n]:i[n],o[Math.ceil(Math.ceil(Math.ceil((a-1)%7)+Math.ceil((Math.floor((a-1)/4)-Math.floor(3*(Math.floor((a-1)/100)+1)/4))%7)+n+r%7)%7)]}function fc_errorAjax(e,t,i){if(401==e.status)location.reload();else{var o=e.responseText.indexOf("<title>")+7,r=e.responseText.indexOf("</title>")-o,n=e.responseText.substr(o,r);if(""==n)try{n=jQuery.parseJSON(e.responseText).Message}catch(e){}fc_AlertError("Error: ("+e.status+"): "+n)}}function fc_show_progress(e){e?$("#divProgress").show():$("#divProgress").hide()}function fc_PressKey(e,t){event.keyCode==e&&document.getElementById(t).click()}function fc_UploadFile(e,t,i,o){if(-1==navigator.appName.indexOf("Explorer")||-1!=navigator.appVersion.indexOf("MSIE 1")){for(var r=document.getElementById(e).files,n=1,a=new Array(".gif",".jpg",".png",".doc",".docx",".xls",".xlsx",".ppt",".pptx",".txt",".pdf"),l=document.getElementById(e).value,s=l.substring(l.lastIndexOf(".")).toLowerCase(),d=!1,c=0;c<a.length;c++)if(a[c]==s){d=!0;break}if(!d)return fc_Alert("Comprueba la extensión de los archivos a subir. \n  Sólo se pueden subir archivos con extensiones: "+a.join()+"\n"),!1;var u=0;d=!1;for(c=0;c<r.length;c++)if((u=r[c].size/1024)>i){d=!0;break}if(u=parseInt(u),d)return fc_Alert("El tamaño del archivo no puede ser mayor a "+i.toString()+" KB"),!1;fc_show_progress(!0);try{for(c=0;c<r.length;c++){"0";var f=new XMLHttpRequest,p=new FormData;p.append("file",r[c]),p.append("name",""),p.append("ruta",t),f.open("POST","../FileUpload.ashx/ProcessRequest",!0),f.onload=function(e){if(200==this.status){var t=this.responseText.split("|");o(t,u),fc_show_progress(!1)}else fc_Alert(e)},f.send(p),n+=1}document.getElementById(e).value=null}catch(e){fc_AlertError(e)}}else fc_Alert("- Debe usar Internet Explorer superior a 9 o otro navegador.")}function fc_Trim(e){var t,i=e;for(t=0;t<i.length&&" "==i.charAt(t);)i=i.substring(t+1,i.length);for(t=i.length-1;t>=0&&" "==i.charAt(t);t=i.length-1)i=i.substring(0,t);return i}function fc_Replace(e,t,i){return e.split(t).join(i)}function fc_getNavigator(){var e,t=navigator.userAgent,i=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(i[1])?"IE "+((e=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||""):"Chrome"===i[1]&&null!=(e=t.match(/\b(OPR|Edge)\/(\d+)/))?e.slice(1).join(" ").replace("OPR","Opera"):(i=i[2]?[i[1],i[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/(\d+)/i))&&i.splice(1,1,e[1]),i.join(" "))}function fc_formatFileSize(e){return"number"!=typeof e?"":e>=1073741824?(e/1073741824).toFixed(2)+" GB":e>=1048576?(e/1048576).toFixed(2)+" MB":(e/1024).toFixed(2)+" KB"}function fc_FormatFileUpload(e,t,i){try{e.indexOf("#")<0&&(e="#"+e);var o="cont_"+e.replace("#","");$(e).after("<div id="+o+"></div>"),o="#"+o,t.paramJson.maxFileSize=t.maxFileSize,t.paramJson.acceptFileTypes=t.acceptFileTypes,$(e).fileupload({url:"../HandlerFileUpload/FileTransferHandler.ashx",autoUpload:t.autoUpload,dataType:"json",maxNumberOfFiles:t.maxNumberOfFiles,nu_files:0,nu_files_pendiente_proceso:0,maxFileSize:t.maxFileSize,acceptFileTypes:t.acceptFileTypes,formData:t.paramJson,add:function(t,i){var r=$(this).fileupload("option"),n=r.nu_files+1;if(i.files[0].name.length>100)fc_Alert("El nombre del archivo no debe exceder los 100 caracteres.");else if(!(n>r.maxNumberOfFiles)){if(void 0!=r.acceptFileTypes){var a="(.|/)("+r.acceptFileTypes+")$",l=new RegExp(a,"i");if(!l.test(i.files[0].type)&&!l.test(i.files[0].name))return void fc_Alert("Tipo de archivo no permitido (Permitidos: ["+r.acceptFileTypes+"]).")}var s="jpg|jpeg|png|gif|pdf|doc|docx|xls|xlsx|ppt|pptx|txt|rtf|msg|xml";s="(.|/)("+s+")$";var d=new RegExp(s,"i");if(d.test(i.files[0].type)||d.test(i.files[0].name))if(r.maxFileSize&&i.files[0].size>r.maxFileSize)fc_Alert("El archivo es demasiado grande. (Peso máximo: "+fc_formatFileSize(r.maxFileSize)+")");else{$(this).fileupload("option","nu_files",n);var c=r.nu_files_pendiente_proceso+1;$(this).fileupload("option","nu_files_pendiente_proceso",c),n>=r.maxNumberOfFiles&&$(e).hide();var u=$("<img src=../bootstrap/img/progress_snake.gif style='display:none;'></img>"),f="";0==r.autoUpload&&(f=$('<button type="button" class="btn btn-default" title="Subir"><i class="fa fa-upload" style="color:#10ab10;"></i></button>').click(function(){i.submit(),$(this).hide(),i.context.find("img").show()}));var p=$('<button type="button" class="btn btn-default" title="Cancelar"><i class="fa fa-ban" style="color:#ff0000;"></i></button>').click(function(){var t=$(e).fileupload("option","nu_files");t-=1,$(e).fileupload("option","nu_files",t);var o=$(e).fileupload("option","nu_files_pendiente_proceso");o-=1,$(e).fileupload("option","nu_files_pendiente_proceso",o),i.abort(),i.context.fadeOut(function(){$(this).remove(),$(e).show()})}),m=$("<label>"+i.files[0].name+"</label><a></a> <label>"+fc_formatFileSize(i.files[0].size)+"</label>");i.context=$("<div/>"),i.context.append(m).append(u).append(f).append("&nbsp;").append(p).append("<div id='line_progress' style='width:0%;background-color:#005cab;height:1px;'></div>").appendTo(o),1==r.autoUpload&&(i.submit(),i.context.find("img").show())}else fc_Alert("Tipo de archivo no permitido por el sistema.")}},progress:function(e,t){var i=parseInt(t.loaded/t.total*100,10);t.context.find("#line_progress").css("width",i+"%")},fail:function(e,t){if(t.jqXHR){if(t.jqXHR.responseText.indexOf("Logeo.aspx?ReturnUrl")>0)return void location.reload();fc_AlertError("Server-error:\n\n"+t.jqXHR.responseText)}},done:function(t,o){$.each(o.result,function(t,r){var n=$(e).fileupload("option","nu_files_pendiente_proceso");if(n-=1,$(e).fileupload("option","nu_files_pendiente_proceso",n),null!=r.error&&""!=r.error){fc_AlertError(r.error);var a=$(e).fileupload("option","nu_files");a-=1,$(e).fileupload("option","nu_files",a),o.context.fadeOut(function(){$(this).remove(),$(e).show()})}else{o.context.find("#line_progress").css("width","100%");var l=$('<button type="button" class="btn btn-default" title="Eliminar"><i class="fa fa-trash-o" style="color:#696969;"></i></button>').attr("data-type",r.delete_type).attr("data-url",r.delete_url).click(function(){$.ajax({dataType:"json",url:$(this).attr("data-url"),type:"POST",data:{"data-type":$(this).attr("data-type")},complete:function(){var t=$(e).fileupload("option","nu_files");t-=1,$(e).fileupload("option","nu_files",t),o.context.fadeOut(function(){$(this).remove(),$(e).show()})}})});o.context.find("img").fadeOut(function(){o.context.find("#line_progress").remove(),o.context.find("label").first().hide(),o.context.find("a").text(r.name).attr("href",r.url).attr("target","_blank"),o.context.find("button[title='Cancelar']").hide(),o.context.append(l)}),null!=i&&void 0!=i&&i(e,r.name,r.url,r.size,r.name_ori)}})}})}catch(e){fc_AlertError("CATCH: "+e)}}function fc_GetNomFilesContentFileUpload(e){e.indexOf("#")<0&&(e="#"+e);var t="cont_"+e.replace("#","");t="#"+t;var i="",o="";return $(t).find("a").each(function(e){e>0&&(o="|"),i+=o+$(this).text()}),i}function fc_CleanFileUpload(e){e.indexOf("#")<0&&(e="#"+e);var t="cont_"+e.replace("#","");t="#"+t,$(t).empty(),$(e).show(),$(e).fileupload("option","nu_files",0),$(e).fileupload("option","nu_files_pendiente_proceso",0)}function fc_GetNumFilesPendienteProceso(e){return e.indexOf("#")<0&&(e="#"+e),$(e).fileupload("option","nu_files_pendiente_proceso")}var RE_ALAFANUMERICO=/^[\w\d áéíóúAÉÍÓÚÑñüÜ_’.,¿?:&()#º\+\[\]/ \\ \-]+$/i,RE_ALAFANUMERICONOESP=/^[\w\dáéíóúAÉÍÓÚÑñ]+$/i,RE_SOLONRO=/^\d+$/i,RE_EMAIL=/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/i,RE_COLORWEB=/^#?([a-f]|[A-F]|[0-9]){3}(([a-f]|[A-F]|[0-9]){3})?$/i,RE_PATH=/([A-Z]:\\[^/:\*\?<>\|]+\.\w{2,6})|(\\{2}[^/:\*\?<>\|]+\.\w{2,6})/i,RE_IP=/^(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:[.](?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}$/i,RE_PRECIO=/^(-)?\d+(\.\d?\d?)?$/i,RE_NRO_DECIMAL=/^[\- \d ,.]+$/i,MASCARA_FECHA="__/__/____",RE_CUENTA_CORRIENTE=/^[\d \- /]*$/i,RE_NUMERO_TELEFONO=/^[\d () \- /]*$/i,RE_PLACA=/^[\w\d\ñÑ\-]*$/i,RE_CODIGO=/^[\w\d\-_.]*$/i,RE_NRO_VERSION=/^[\d.]+$/i;$(document).ready(function(){$(".panel-heading[data-spy=affix]").width($(".panel-default").width()-10),$(".modal").on("show.bs.modal",function(e){try{var t=document.getElementById("ui-datepicker-div");t&&e.delegateTarget.appendChild(t)}catch(e){console.log("Error: show.bs.modal: "+e)}}),$(".modal").on("hide.bs.modal",function(e){try{var t=document.getElementById("ui-datepicker-div");t&&$("body").append(t)}catch(e){console.log("Error: hide.bs.modal: "+e)}})}),$(window).resize(function(){fc_UpdatePanelHeaderBotones()}),String.prototype.format=function(){for(var e=this,t=0;t<arguments.length;t++){var i="{"+t+"}";e=e.replace(i,arguments[t])}return e};var DatePicker_Opciones_Default={fl_changeMonth:!1,fl_changeYear:!1,minDate:"",maxDate:"",fl_enabled_textbox:!0},chr_miles=",",chr_decimales=".",mascara_importe="999,999,999.99",mstrFormatoIncorrecto=" no tiene el formato correcto.\n",JQGrid_Opciones_Default={pageSize:10,height:"auto",fl_paginar:!0,fl_paginar_scroll:!1,fl_multiselect:!1,altRows:!0,subGrid:!1,subGridModel:[],subGridRowExpanded:function(){},subGridOptions:{}},JQGrid_Util=new Object;JQGrid_Util.GetTabla_Local=function(e,t,i,o,r,n,a,l,s,d){fc_GetJQGrid_Local(e,t,i,o,r,n,a,l,s,d)},JQGrid_Util.GetTabla_Ajax=function(e,t,i,o,r,n,a,l,s,d){fc_GetJQGrid_Ajax(e,t,i,o,r,n,a,l,s,d)},JQGrid_Util.getIDs=function(e){return e.indexOf("#")<0&&(e="#"+e),$(e).jqGrid("getDataIDs")},JQGrid_Util.getRowData=function(e,t){return e.indexOf("#")<0&&(e="#"+e),$(e).getRowData(t)},JQGrid_Util.getRowDataSelected=function(e){e.indexOf("#")<0&&(e="#"+e);var t=$(e).jqGrid("getGridParam","selrow");return null==t?null:$(e).getRowData(t)},JQGrid_Util.getRowIDSelected=function(e){return e.indexOf("#")<0&&(e="#"+e),$(e).jqGrid("getGridParam","selrow")},JQGrid_Util.getRowIDsSelected=function(e){return e.indexOf("#")<0&&(e="#"+e),$(e).jqGrid("getGridParam","selarrrow")},JQGrid_Util.getCountRegistros=function(e){return e.indexOf("#")<0&&(e="#"+e),$(e).jqGrid("getGridParam","records")},JQGrid_Util.resetSelection=function(e){e.indexOf("#")<0&&(e="#"+e),$(e).resetSelection()},JQGrid_Util.clearData=function(e){e.indexOf("#")<0&&(e="#"+e),$(e).clearGridData(!0)},JQGrid_Util.AutoWidthResponsive=function(e){e.indexOf("#")<0&&(e="#"+e),$(window).resize(function(){gridParentWidth=$("#gbox_"+e.replace("#","")).parent().width(),$(e).jqGrid("setGridWidth",gridParentWidth)})};var Modal_Util=new Object;Modal_Util.Open=function(e){e.indexOf("#")<0&&(e="#"+e),$(e).dialog("open")},Modal_Util.Close=function(e){e.indexOf("#")<0&&(e="#"+e),$(e).dialog("close")},Modal_Util.FormatModal=function(e,t,i){fc_Modal(e,t,i)},Modal_Util.Alert=function(e){fc_Alert(e)},Modal_Util.AlertError=function(e){fc_AlertError(e)},Modal_Util.AlertSuccess=function(e){fc_AlertSuccess(e)},Modal_Util.Confirm=function(e,t){fc_Confirm(e,t)};var JQFileUpload_Opciones_Default={maxNumberOfFiles:1,autoUpload:!1,maxFileSize:5242880,acceptFileTypes:void 0,paramJson:{}},JQFileUpload_Util=new Object;JQFileUpload_Util.FormatFileUpload=function(e,t,i){fc_FormatFileUpload(e,IdPieTabla,Cabecera,ModelCol,t,objDatos,fn_Click,fn_dblClick,i)},JQFileUpload_Util.getNomFilesContentFileUpload=function(e){return fc_GetNomFilesContentFileUpload(e)},JQFileUpload_Util.cleanFileUpload=function(e){fc_CleanFileUpload(e)},JQFileUpload_Util.getNumFilesPendienteProceso=function(e){return fc_GetNumFilesPendienteProceso(e)};
